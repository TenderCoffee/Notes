手机游戏中的人物角色模型一般不应该超过5000面，贴图大小不应该超过512像素，骨骼数量不应该超过30个



# 不同游戏类型不同标准

1、单一主角：可以对主角进行精细化的雕琢，骨骼可以多达70个，贴图可以达到2048x2048

但需要综合需求：如换装

2、卡牌策略：静态的3D人物场景和人物角色的自动攻击

视角不会移动，所以场景模型和人物模型在面数、贴图和材质上可以稍微宽松

人物模型通常在7000面左右，骨骼数量可达40个，贴图大小可以为1024×1024像素

3、第三人称 RPG

自由视角，看到的场景范围更大

角色模型：面数要控制在3000面以下，骨骼数量控制在30个以下

建筑模型面数：

​	1、大型建筑7000面以下，

​	2、中型建筑5000面以下

​	3、小型建筑3000面以下

​	4、小部件则控制在1000面以下

贴图：最大512×512像素及以下

角色和中大型模型：

​	主贴图：512×512像素

​	副贴图：256×256像素

​	小型和小部件贴图：128×128像素及以下



**同屏能看到的模型数量越多，越要进行更多的限制**

人物角色的模型限制在2500面以内

建筑则限制在5000面、3000面或2000面以内

其他小部件则限制在750面以内

贴图基本上以256×256像素为主，副贴图为128×128像素

材质球数量不能超过2个。



LOD：把渲染压力和渲染质量平衡



# 设备标准

选择某个设备作为标准



# 反推计算得到规范



## 模型面数

使用全场景总面数来控制



### 1、首先确定目标：同屏面数控制多少面数

如：需要控制同屏 40w 面



### 2、模型分类

同屏角色 + 建筑 + 地表模型



### 3、用假设，计算极限值

为各部分占用的面数做个假设

假设同屏 100个角色、50个建筑、而假如地表模型为3w面的情况下

则还剩下 37w 面数可以做分配（40w - 3w = 37w）

在给150个模型做分配，则 37w / (100 + 5) = 2466面 ≈ 2500面

因为每个模型的重要程度不同，需要拆分等级



### 4、根据重要程度，进行模型的等级拆分

小物件：1级

小建筑：2级

**中型建筑、角色：3级**

大型建筑：4级



### 5、根据等级再分配

1、这100个角色每个可以有3000面

2、剩下的50个建筑，大型建筑5个，中型建筑20个，小型建筑10个，小物件10个，可以分配剩下的7万面

​	小件模型在500面以下，小型建筑模型限制在1000面左右，中型建筑模型限制在2000面左右，大型建筑限制在3000面左右



## 贴图大小



### 方式一：内存反推



#### 1、首先确定目标：总内存

如：需要控制不超过500M 内存



#### 2、内存分类

资源内存、业务逻辑内存、引擎逻辑内存、第三方插件内存



#### 3、用假设，计算极限值

为各部分占用的内存做个假设

**资源内存：270M（最关心的内存）**

业务逻辑内存+引擎逻辑内存：150M

第三方插件内存：80M



资源的分类：模型、贴图、UI图集、材质球、Prefab 数据

1、材质球、Prefab = 占据 20 %

​		所以如果是 270M 则 应该限制在 50M 的内存范围内

2、**模型 + UI 图集 + 3D 贴图 = 占据 80%**

​		所以如果是 270M 则 应该限制在 220M 的内存范围内

​	模型数据：占据 15% ~ 35% 的空间 => 33M ~ 77M

​	UI 图集：占据 30% ~ 50% 的空间 => 60M ~ 110M

​	3D 贴图：不能超过 130M =>  220-33-60=121M



#### 4、3D 贴图分类 确定 内存极限值

需要先假设场景中有多少种类型的模型

如果一共有 130M 作为分配：

假设场景中有100种不同类型的模型，每个种类的模型采用不同类型的贴图

小型模型有30种、中型模型有50种、大型模型有20种

**那么小型模型的贴图不得超过 0.6MB，中型模型的贴图不得超过 1.25MB，大型模型的贴图不得超过 2.75MB**

18 + 62.5 + 55 = 135.5M



#### 5、设置贴图压缩算法

1024 x 1024 像素在 RGBA 32 不压缩的情况下 = 1024 x 1024 x 4通道 x 8位 bit  = 33,554,432 位 =  4,194,304 字节 Byte  ≈ 4 M

使用RGBA 32bit真彩（Truecolor），一张 512 x 512 的图 占用内存 = 4Bytes x 512 x 512 = 1MB;

32  / 8 = 4 字节 x 宽 x 高 = 1048576字节 = 1 M（1048576 / 1024 / 1024）



压缩算法的压缩比率 15% ~ 50%

![](.\images\贴图压缩算法.png)



所以小型模型 贴图总数 不能超过 2张贴图，如果有2张贴图，则小型模型 单张贴图 = 0.6 / 2 = 0.3M

0.3M * 1024 * 1024 = 314,572.8 Byte

314,572.8 Byte * 8 = 2,516,582.4 位

2,516,582.4  / 8  / 4 = 78,643.2 单通道位数 开方 ≈ 280宽和高

所以小型模型 单张贴图尺寸约为 256x256



### 方式二：贴图总张数 和 总尺寸大小 反推

设定场景的总体贴图大小为不超过20张1024×1024像素

那么在小型模型30种、中型模型平均20种、大型模型平均10种的情况下，就可以规定：

小型模型贴图大小为256×256像素以下

中型模型贴图大小为512×512像素以下

大型模型贴图大小为1024×1024像素以下



## 材质球的数量 - DrawCall 数量的依据

把模型和特效分成根据复杂度划分：从1级到10级

1级为最低级，最多只能有1个材质球

10级为最高级，最多有27个材质球（种类和数量是最少）



## 对不同性能级别的设备的资源划分

对不同级别设备的资源进行再细分和规范，也就是采用俗称的LOD（Levels of Detail，细节等级）加载方式

LOD通常会分为1～9级，每级都有不同的细节等级，从低模到高模



